<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tax Payer Verification</title>
    <link rel="stylesheet" href="../../extjs/resources/ext-all.css">
    <link rel="stylesheet" href="../../css/all.css">
    <style>
        body {
            background: #dbe8f7;
            margin: 0;
            font-family: tahoma, arial, verdana, sans-serif;
            font-size: 15px;
            min-width: 100vw;
            min-height: 100vh;
        }
        .main-wrap {
            margin: 0 auto;
            width: 100%;
            max-width: 100%;
        }
        .section-panel {
            border: 1.5px solid #8cb3df;
            background: #eaf3fb;
            margin: 18px 12px 0 12px;
            box-sizing: border-box;
        }
        .section-header {
            background: #c7def7;
            color: #1a4b8c;
            font-weight: bold;
            font-size: 18px;
            padding: 6px 14px;
            border-bottom: 1.5px solid #8cb3df;
            letter-spacing: 0.5px;
        }
        .section-body {
            padding: 24px 24px 24px 24px;
            display: flex;
            gap: 18px;
        }
        .verif-form-panel, .search-panel {
            background: #eaf3fb;
            border: 1.5px solid #b5cbe7;
            padding: 18px 24px 24px 24px;
            min-width: 420px;
            min-height: 220px;
            flex: 1 1 0;
            box-sizing: border-box;
        }
        .verif-form-panel {
            margin-right: 18px;
        }
        .form-row {
            margin-bottom: 22px;
            display: flex;
            align-items: center;
        }
        .form-label {
            width: 140px;
            font-weight: normal;
            color: #1a4b8c;
            font-size: 16px;
        }
        .form-input, .form-select {
            width: 260px;
            padding: 6px 8px;
            font-size: 16px;
            border: 1.5px solid #b5cbe7;
            border-radius: 3px;
            background: #fff;
        }
        .form-select {
            appearance: none;
            background: #fff url('data:image/svg+xml;utf8,<svg fill="%238cb3df" height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>') no-repeat right 8px center/18px 18px;
        }
        .button-row {
            margin-top: 18px;
        }
        .verif-btn {
            min-width: 90px;
            padding: 6px 18px;
            font-size: 15px;
            border: 1.5px solid #b5cbe7;
            border-radius: 3px;
            background: #f5f5f5;
            color: #222;
            margin-right: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .verif-btn:disabled {
            background: #eaeaea;
            color: #aaa;
            border-color: #e0e0e0;
            cursor: not-allowed;
        }
        .verif-btn:last-child {
            margin-right: 0;
        }
        .back-btn {
            margin: 18px 0 0 8px;
            padding: 6px 18px 6px 38px;
            font-size: 15px;
            border: 1.5px solid #b5cbe7;
            border-radius: 3px;
            background: #f5f5f5 url('https://cdn-icons-png.flaticon.com/512/271/271220.png') no-repeat 10px center/22px 22px;
            color: #1a4b8c;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="main-wrap">
    <div style="padding-top:24px;"></div>
    <div class="section-panel">
        <div class="section-header">Tax Payer Verification</div>
        <div class="section-body">
            <div class="verif-form-panel">
                <form>
                    <div class="form-row" style="gap: 0; flex-wrap: wrap; max-width: 900px;">
                        <div style="display:flex;align-items:center;min-width:320px;max-width:340px;">
                            <label class="form-label">Module:</label>
                            <select class="form-select">
                                <option>Vat Return Entry</option>
                                <option>Estimated Return Entry</option>
                                <option>D-02 Return Entry</option>
                                <option>D-03 Return Entry</option>
                                <option>Electronic Billing</option>
                                <option>TDS</option>
                            </select>
                        </div>
                            <div style="width:1px;height:100%;background:#b5cbe7;margin:0 20px 0 0;align-self:stretch;"></div>
                        <div style="display:flex;align-items:center;min-width:220px;max-width:260px;">
                            <label class="form-label">Status:</label>
                            <select class="form-select" style="width:120px;font-size:12px;">
                                <option>All</option>
                                <option>Verified</option>
                                <option>Submitted</option>
                                <option>Not Submitted</option>
                            </select>
                            <button class="verif-btn" type="button" style="margin-left:10px;min-width:50px;">List</button>
                        </div>
                    </div>
                    <div class="form-row">
                        <label class="form-label">Submission No.:</label>
                        <input class="form-input" type="text" id="submissionNoInput">
                    </div>
                    <div class="button-row">
                        <button class="verif-btn" type="button" id="previewBtn" disabled>Preview</button>
                        <button class="verif-btn" type="button" id="verifyBtn" disabled>Verify</button>
                        <button class="verif-btn" type="button" id="resetBtn">Reset</button>
                        <button class="verif-btn" type="button">Proceed To Payment</button>
                    </form>
                    <!-- Modal for E-Return Verified -->
                    <div id="verifySuccessModal" style="display:none;position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.10);align-items:center;justify-content:center;">
                        <div style="background:#eaf1fa;border-radius:8px;min-width:320px;max-width:90vw;box-shadow:0 2px 16px #0002;position:relative;border:1.5px solid #b5cbe7;margin-top:90px;padding:0;">
                            <div style="padding:10px 18px 0 18px;font-size:16px;font-weight:bold;color:#1a4b8c;letter-spacing:0.5px;">INFO
                                <span onclick="hideVerifySuccessModal()" style="position:absolute;top:8px;right:14px;font-size:18px;cursor:pointer;color:#888;">&times;</span>
                            </div>
                            <div style="display:flex;align-items:flex-start;gap:10px;padding:10px 18px 0 18px;">
                                <span style="display:inline-block;margin-top:2px;">
                                    <svg width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="16" fill="#b5cbe7"/><text x="16" y="22" text-anchor="middle" font-size="20" fill="#1a4b8c" font-family="Arial, sans-serif">i</text></svg>
                                </span>
                                <span style="font-size:15px;color:#222;line-height:1.5;">E-Return Verified Successfully.</span>
                            </div>
                            <div style="text-align:center;padding:16px 0 10px 0;">
                                <button id="verifySuccessOkBtn" style="padding:3px 32px;background:#e3eaf3;border:1.5px solid #b5cbe7;border-radius:3px;font-size:15px;cursor:pointer;color:#1a4b8c;font-weight:bold;">OK</button>
                            </div>
                        </div>
                    </div>
                    </div>
                    <script>
                    // Enable Preview/Verify if submission number matches d03 submission number
                    const submissionInput = document.getElementById('submissionNoInput');
                    const previewBtn = document.getElementById('previewBtn');
                    const verifyBtn = document.getElementById('verifyBtn');
                    const resetBtn = document.getElementById('resetBtn');

                    function checkSubmissionInput() {
                        // Get d03 submission number from localStorage
                        const d03Ref = localStorage.getItem('d03_ref_no');
                        if (submissionInput.value.trim() && d03Ref && submissionInput.value.trim() === d03Ref) {
                            previewBtn.disabled = false;
                            verifyBtn.disabled = false;
                        } else {
                            previewBtn.disabled = true;
                            verifyBtn.disabled = true;
                        }
                    }
                    submissionInput.addEventListener('input', checkSubmissionInput);

                    resetBtn.onclick = function() {
                        submissionInput.value = '';
                        checkSubmissionInput();
                    };

                    verifyBtn.onclick = function() {
                        document.getElementById('verifySuccessModal').style.display = 'flex';
                    };
                    function hideVerifySuccessModal() {
                        document.getElementById('verifySuccessModal').style.display = 'none';
                    }
                    document.getElementById('verifySuccessOkBtn').onclick = hideVerifySuccessModal;
                    </script>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
</html>
